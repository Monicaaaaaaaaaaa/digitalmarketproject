<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendors - CampusCart</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <h1>Campus<span>Cart</span></h1>
            </div>
            <div class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="vendors.html" class="active">Vendors</a></li>
                <li><a href="contact.html">Contact</a></li>
<li class="auth-buttons">
  <a href="#" class="btn-login">Login</a>
  <a href="#" class="btn-signup">Sign Up</a>
</li>
<li class="user-dropdown" style="display: none;">
  <div class="user-icon">
    <i class="fas fa-user-circle"></i>
    <span id="userNameNav"></span>
    <ul class="dropdown-menu">
      <li><a href="#" id="openCustomerProfile">My Profile</a></li>
      <li><a href="#" id="navLogoutBtn">Logout</a></li>
    </ul>
  </div>
</li>

                <li class="signup-container">
                </li>
            </ul>
        </div>
    </nav>

<section class="vendor-hero">
    <div class="container">
      <div class="vendor-hero-content">
        <h2><span>Discover</span> CampusVendors</h2>
        <p>Connect with trusted beauty professionals, businesses, and student entrepreneurs.</p>
        <form id="searchForm">
          <input type="text" id="searchInput" placeholder="Search vendors..." required />
          <button type="submit" class="search-button">Search</button>
        </form>
        <div id="vendorResults"></div>
      </div>
    </div>
  </section>

  <section class="vendors" id="vendors">
    <div class="container">
      <div class="section-header">
        <h2>Our Vendors</h2>
        <p>Discover businesses around campus</p>
      </div>

      <div class="vendor-filters">
        <button class="filter-btn active" data-filter="all">All</button>
        <button class="filter-btn" data-filter="beauty">Beauty Professionals</button>
        <button class="filter-btn" data-filter="Local Products">Local Products</button>
      </div>

      <div class="vendors-grid">
        <div class="vendor-card" data-category="beauty">
          <div class="vendor-image">
            <img src="images/placeholder" alt="Beauty salon" />
            <div class="vendor-badge">Beauty</div>
          </div>
          <div class="vendor-details">
            <h3>Glam Squad</h3>
            <div class="vendor-rating">
              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              <i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
              <span>4.5 (28)</span>
            </div>
            <p>Professional makeup, hair styling, and nail services.</p>
            <a href="vendor-profile.html?email=glamsquad@example.com" class="btn-filled btn-profile">View Profile</a>
          </div>
        </div>

        <div class="vendor-card" data-category="Local Products">
          <div class="vendor-image">
            <img src="images/placeholder" alt="Fashion store" />
            <div class="vendor-badge">Fashion</div>
          </div>
          <div class="vendor-details">
            <h3>Campus Threads</h3>
            <div class="vendor-rating">
              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              <i class="fas fa-star"></i><i class="far fa-star"></i>
              <span>4.0 (16)</span>
            </div>
            <p>Trendy clothing and accessories for students.</p>
            <a href="vendor-profile.html?email=campusthreads@example.com" class="btn-filled btn-profile">View Profile</a>
          </div>
        </div>

        <div class="vendor-card" data-category="beauty">
          <div class="vendor-image">
            <img src="images/placeholder" alt="lashes" />
            <div class="vendor-badge">Lashes</div>
          </div>
          <div class="vendor-details">
            <h3>lashes Extensions, clusters</h3>
            <div class="vendor-rating">
              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
              <i class="fas fa-star"></i><i class="far fa-star"></i>
              <span>4.0 (16)</span>
            </div>
            <p>Enhancing your eyelashes with extensions or cluster lashes.</p>
            <a href="vendor-profile.html?email=lashes@example.com" class="btn-filled btn-profile">View Profile</a>
        </div>
      </div>
      <div class="more-vendors">
          <a href="#" class="btn-primary">View All Vendors</a>
        </div>
    </div>
  </section>

    
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h2>Campus<span>Cart</span></h2>
                    <p>Your campus marketplace</p>
                </div>
                <div class="footer-links">
                    <div class="footer-column">
                        <h3>Quick Links</h3>
                        <ul>
                            <li><a href="index.html">Home</a></li>
                            <li><a href="about.html">About</a></li>
                            <li><a href="vendors.html">Vendors</a></li>
                            <li><a href="contact.html">Contact</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>For Vendors</h3>
                        <ul>
                            
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>For Customers</h3>
                        <ul>
                            <li><a href="vendors.html">Find Services</a></li>
                            <li><a href="faqs.html">FAQs</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 CampusCart. All rights reserved.</p>
                <div class="footer-policies">
                    <a href="privacy-policy.html">Privacy Policy</a>
                    <a href="termsofservice.html">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

     <div class="modal" id="loginModal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Login to CampusCart</h2>
        <form id="loginForm">
            <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" placeholder="Your email" required>
            </div>
            <div class="form-group">
                <label for="loginPassword">Password</label>
                <div class="password-field">
                    <input type="password" id="loginPassword" placeholder="Your password" required>
                    <i class="fas fa-eye toggle-password"></i>
                </div>
            </div>

            <div class="form-group">
                <label for="userRole">Login as</label>
                <select id="userRole" required>
                    <option value="">Select role</option>
                    <option value="vendor">Vendor</option>
                    <option value="customer">Customer</option>
                </select>
            </div>

            <div class="form-options">
                <div class="remember-me">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">Remember me</label>
                </div>
                <a href="#" class="forgot-password">Forgot Password?</a>
            </div>
            <button type="submit" class="btn-primary btn-block">Login</button>
        </form>
        <div class="modal-footer">
            <p>Don't have an account? <a href="#" id="showSignupModalFromLogin">Sign Up</a></p>
        </div>
    </div>
</div>
    <div class="modal" id="signupModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Create an Account</h2>
            <div class="user-type-selector">
                <div class="user-type active" data-type="customer">
                    <i class="fas fa-user"></i>
                    <span>Customer</span>
                </div>
                <div class="user-type" data-type="vendor">
                    <i class="fas fa-store"></i>
                    <span>Vendor</span>
                </div>
            </div>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signupName">Full Name</label>
                    <input type="text" id="signupName" placeholder="Your full name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="signupEmail">Email</label>
                        <input type="email" id="signupEmail" placeholder="Your email" required>
                    </div>
                    <div class="form-group">
                        <label for="signupPhone">Phone Number</label>
                        <input type="tel" id="signupPhone" placeholder="Your phone number" required>
                    </div>
                </div>
                <div class="form-group vendor-field" style="display: none;">
                    <label for="businessName">Business Name</label>
                    <input type="text" id="businessName" placeholder="Your business name">
                </div>
                <div class="form-group vendor-field" style="display: none;">
                    <label for="businessType">Business Type</label>
                    <select id="businessType">
                        <option value="">Select business type</option>
                        <option value="beauty">Beauty Professional</option>
                        <option value="ecommerce">E-commerce</option>
                        <option value="services">Services</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="signupMatric">Matric Number</label>
                    <input type="text" id="signupMatric" placeholder="Your matric number" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="signupPassword">Password</label>
                        <div class="password-field">
                            <input type="password" id="signupPassword" placeholder="Create password" required>
                            <i class="fas fa-eye toggle-password"></i>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <div class="password-field">
                            <input type="password" id="confirmPassword" placeholder="Confirm password" required>
                            <i class="fas fa-eye toggle-password"></i>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="terms-checkbox">
                        <input type="checkbox" id="agreeTerms" required>
                        <label for="agreeTerms">I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></label>
                    </div>
                </div>
                <button type="submit" class="btn-primary btn-block">Create Account</button>
            </form>
            <div class="modal-footer">
                <p>Already have an account? <a href="#" id="showLoginModalFromSignup">Login</a></p>
            </div>
        </div>
    </div>

    <div class="modal" id="otpModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Verify Your Email</h2>
            <p>We've sent a verification code to your email. Please enter the code below.</p>
            <form id="otpForm">
                <div class="otp-inputs">
                    <input type="text" maxlength="1" class="otp-input" required>
                    <input type="text" maxlength="1" class="otp-input" required>
                    <input type="text" maxlength="1" class="otp-input" required>
                    <input type="text" maxlength="1" class="otp-input" required>
                    <input type="text" maxlength="1" class="otp-input" required>
                    <input type="text" maxlength="1" class="otp-input" required>
                </div>
                <div class="resend-otp">
                    <p>Didn't receive the code? <a href="#" id="resendOtp">Resend</a></p>
                    <div id="otpTimer">00:59</div>
                </div>
                <button type="submit" class="btn-primary btn-block">Verify</button>
            </form>
        </div>
    </div>
    <div class="modal" id="customerProfileModal">
  <div class="modal-content">
    <span class="close-modal" onclick="document.getElementById('customerProfileModal').style.display='none'">&times;</span>
    

    <div id="profileView">
      <h2>My Profile</h2>
      <p><strong>Name:</strong> <span id="viewProfileName"></span></p>
      <p><strong>Email:</strong> <span id="viewProfileEmail"></span></p>
      <p><strong>Phone:</strong> <span id="viewProfilePhone"></span></p>
      <button class="btn-primary" id="editProfileBtn">Edit Profile</button>
    </div>

    <form id="editProfileForm" style="display: none;">
      <h2>Edit Profile</h2>
      <div class="form-group">
        <label for="profileName">Full Name</label>
        <input type="text" id="profileName" required>
      </div>
      <div class="form-group">
        <label for="profileEmail">Email (read-only)</label>
        <input type="email" id="profileEmail" readonly>
      </div>
      <div class="form-group">
        <label for="profilePhone">Phone Number</label>
        <input type="tel" id="profilePhone" required>
      </div>
      <div class="form-buttons">
        <button type="submit" class="btn-primary">Save Changes</button>
        <button type="button" class="btn-secondary" id="cancelEditBtn">Cancel</button>
      </div>
    </form>
  </div>
</div>
<script>
    
    // Render vendors grid for everyone
    document.addEventListener("DOMContentLoaded", () => {
      const grid = document.querySelector(".vendors-grid");
      if (!grid) return;

      const all = JSON.parse(localStorage.getItem("vendorsIndex") || "[]");
      if (all.length === 0 && grid.children.length === 0) {
        grid.innerHTML = "<p>No vendors published yet.</p>";
        return;
      }

      all.forEach((v) => {
        const card = document.createElement("div");
        card.className = "vendor-card";
        card.setAttribute("data-category", v.category.toLowerCase());

        card.innerHTML = `
          <div class="vendor-image">
            <img src="${v.imageUrl}" alt="${v.businessName}">
            <div class="vendor-badge">${v.category}</div>
          </div>
          <div class="vendor-details">
            <h3>${v.businessName}</h3>
            <p>${v.description.substring(0, 80)}…</p>
            <a class="btn-secondary"
              href="vendor-profile.html?email=${encodeURIComponent(v.email)}">
              View Profile
            </a>
          </div>`;
        grid.appendChild(card);
      });
    });

    document.addEventListener("DOMContentLoaded", function () {
    const userEmail = localStorage.getItem("userEmail");
    const userRole = localStorage.getItem("userRole");
    const users = JSON.parse(localStorage.getItem("users") || "{}");

    const authBtns = document.querySelector(".auth-buttons");
    const userDropdown = document.querySelector(".user-dropdown");
    const userNameNav = document.getElementById("userNameNav");
    const profileBtn = document.getElementById("openCustomerProfile");
    const profileModal = document.getElementById("customerProfileModal");

    if (userEmail && users[userEmail]) {
        authBtns.style.display = "none";
        userDropdown.style.display = "flex";
        userNameNav.textContent = users[userEmail].name.split(" ")[0];
    }
profileBtn.addEventListener("click", function (e) {
    e.preventDefault();

    const currentRole = localStorage.getItem("userRole");
    const currentEmail = localStorage.getItem("userEmail");
    const currentUsers = JSON.parse(localStorage.getItem("users") || "{}");

    if (!currentEmail || !currentUsers[currentEmail]) return;

    if (currentRole === "customer") {
        showCustomerProfile(currentUsers[currentEmail]); 
    } else if (currentRole === "vendor") {
        window.location.href = "vendors-dashboard.html"; 
    } else {
        alert("Unknown user role. Please log in again.");
    }
});
function showCustomerProfile(user) {
    document.getElementById("profileView").style.display = "block";
    document.getElementById("editProfileForm").style.display = "none";

    document.getElementById("viewProfileName").textContent = user.name;
    document.getElementById("viewProfileEmail").textContent = user.email;
    document.getElementById("viewProfilePhone").textContent = user.phone;

    document.getElementById("profileName").value = user.name;
    document.getElementById("profileEmail").value = user.email;
    document.getElementById("profilePhone").value = user.phone;
    document.getElementById("customerProfileModal").style.display = "block";
}
document.getElementById("editProfileBtn").addEventListener("click", function () {
    document.getElementById("profileView").style.display = "none";
    document.getElementById("editProfileForm").style.display = "block";
});

document.getElementById("cancelEditBtn").addEventListener("click", function () {
    document.getElementById("profileView").style.display = "block";
    document.getElementById("editProfileForm").style.display = "none";
});


    // Handle Save Changes in profile modal
    document.getElementById("editProfileForm").addEventListener("submit", function (e) {
        e.preventDefault();
        const email = localStorage.getItem("userEmail");
        const users = JSON.parse(localStorage.getItem("users") || "{}");

        if (!users[email]) return;

        users[email].name = document.getElementById("profileName").value;
        users[email].phone = document.getElementById("profilePhone").value;

        localStorage.setItem("users", JSON.stringify(users));
        alert("Profile updated successfully!");
        profileModal.style.display = "none";
    });

    // Logout
    document.getElementById("navLogoutBtn").addEventListener("click", function (e) {
        e.preventDefault();
        localStorage.removeItem("userEmail");
        localStorage.removeItem("userRole");
        location.reload();
    });

    window.onclick = function (event) {
        if (event.target == profileModal) {
            profileModal.style.display = "none";
        }
    };
});
  document.addEventListener("DOMContentLoaded", function () {
    const searchForm = document.getElementById("searchForm");
    const searchInput = document.getElementById("searchInput");
    const vendorCards = document.querySelectorAll(".vendor-card");

    searchForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const query = searchInput.value.toLowerCase().trim();

      vendorCards.forEach((card) => {
        const name = card.querySelector("h3").textContent.toLowerCase();
        const description = card.querySelector("p").textContent.toLowerCase();

        if (name.includes(query) || description.includes(query)) {
          card.style.display = "block";
        } else {
          card.style.display = "none";
        }
      });
    });
  });
</script>


  <script src="script.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
</body>
</html>